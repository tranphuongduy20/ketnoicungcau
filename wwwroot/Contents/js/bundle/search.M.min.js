function filterProduct(n){query.PageIndex=0;query.SearchType=n===typeBuy?1:2;$.ajax({url:"/Search/GetListProduct",type:"POST",data:query,cache:!1,beforeSend:function(){$(".preloader").show()},success:function(t){var i;HidePreloader();t==null||t.listProduct===""||t.listProduct.trim()===""?query.SearchType===typeBuy?(i='<li id="empty"><i class="empty"><\/i>Không có sản phẩm chào mua nào phù hợp với tiêu chí tìm kiếm!<\/li>',$("#listproduct-buy").html(i),$("#total").text(genTextHaveAll(t.total,"doanh nghiệp"))):query.SearchType===typeSell&&(i='<li id="empty"><i class="empty"><\/i>Không có sản phẩm chào bán nào phù hợp với tiêu chí tìm kiếm!<\/li>',$("#listproduct-sell").html(i)):n==typeBuy?($("#listproduct-buy").html(t.listProduct),$("#total").text(genTextHaveAll(t.total,"chào mua")),handleReadMore("#readmore-buy",t.left),totalProductBuy=t.total):($("#listproduct-sell").html(t.listProduct),$("#total").text(genTextHaveAll(t.total,"chào bán")),handleReadMore("#readmore-sell",t.left),totalProductSell=t.total)},error:function(){HidePreloader()}})}function filterCompany(){query.PageIndex=0;query.SearchType=typeCompany;$.ajax({url:"Search/GetListCompany",type:"POST",data:query,cache:!1,beforeSend:function(){$(".preloader").show()},success:function(n){if(HidePreloader(),n==null||n.listCompany===""||n.listCompany.trim()==="")$(".listcompany").html('<li id="empty"><i class="empty"><\/i>Không có doanh nghiệp nào phù hợp với tiêu chí tìm kiếm!<\/li>'),$("#total").text(genTextHaveAll(0,"doanh nghiệp"));else $(".listcompany").append(n.listCompany),$("#total").text(genTextHaveAll(n.total,"doanh nghiệp")),handleReadMore("#readmore-company",n.left),totalCompany=n.total},error:function(){HidePreloader()}})}function viewMoreProduct(n){query.PageIndex=query.PageIndex+1;query.SearchType=n===typeBuy?1:2;$.ajax({url:"Search/GetListProduct",type:"POST",data:query,cache:!1,beforeSend:function(){$(".preloader").show()},success:function(t){HidePreloader();t!=""&&(n===typeBuy?($("#listproduct-buy").append(t.listProduct),handleReadMore("#readmore-buy",t.left)):($("#listproduct-sell").append(t.listProduct),handleReadMore("#readmore-sell",t.left)))},error:function(){HidePreloader();console.log("Lỗi gọi action")}})}function viewMoreCompany(){query.PageIndex=query.PageIndex+1;query.SearchType=sizeCompany;$.ajax({url:"Search/GetListCompany",type:"POST",data:query,cache:!1,beforeSend:function(){$(".preloader").show()},success:function(n){HidePreloader();n!=""&&($(".listcompany").append(n.listCompany),handleReadMore("#readmore-company",n.left))},error:function(){HidePreloader()}})}function handleReadMore(n,t){t>0?($(n).show(),$(n+" span").text(`Xem thêm ${t} sản phẩm`)):$(n).hide()}function genTextHaveAll(n,t){return`Có ${n} kết quả ${t} ‘${query.kw}’`}function checkClickTab(n){return!1||$(n+" li").length===0}function updateURL(n,t){var i=window.location.href,r=updateQueryStringParameter(i,n,t);window.history.pushState("","",r)}function updateQueryStringParameter(n,t,i){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),u=n.indexOf("?")!==-1?"&":"?";return n.match(r)?n.replace(r,"$1"+t+"="+i+"$2"):n+u+t+"="+i}window.location.href.includes("&")&&window.location.href.split("&")[0]!=undefined&&window.history.pushState("","",window.location.href.split("&")[0]);$(document).ready(function(){$(".tab-commonlist li").click(function(){var n=$(this).attr("data-id");$(".tab-commonlist li").removeClass("is-active");$(".tab-content").removeClass("show-active");$(this).addClass("is-active");$("#"+n).addClass("show-active")});$(".tab-commonlist li").click(function(){$(".tab-commonlist li").removeClass("is-active");$(".tab-content").removeClass("show-active");$(this).addClass("is-active");$(this).is("#tab-sell")?($("#tab1").addClass("show-active"),checkClickTab(".listproduct")?filterProduct(typeSell):totalProductSell>0&&$("#total").text(genTextHaveAll(totalProductSell,"chào bán"))):$(this).is("#tab-buy")?($("#tab2").addClass("show-active"),checkClickTab(".listbuy")?filterProduct(typeBuy):totalProductBuy>0&&$("#total").text(genTextHaveAll(totalProductBuy,"chào mua"))):$(this).is("#tab-company")&&($("#tab3").addClass("show-active"),checkClickTab(".listcompany")?filterCompany():totalCompany>0&&$("#total").text(genTextHaveAll(totalCompany,"doanh nghiệp")))})});