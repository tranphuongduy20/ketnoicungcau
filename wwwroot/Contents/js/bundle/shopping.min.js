function HandleSubCateFilter(){var t=$(".quicklink").position(),i=$("a[data-url=all]").outerHeight(!0),r=t.top+i*2,n=!1;$(".cate__filter").each(function(){var t=$(this).position(),i=t.top;i>=r&&($(this).hide(),n=!0)});n&&$("#show-all-cate").show()}function IsHasTabActive(){return $(".quicklink").find("a.active").length>0?!0:!1}function getWebsiteList(){flagCompanyList&&(flagCompanyList=!1,query.IsGetAll=!1,query.IsFilterManyCate="1",query.PageIndex=0,$.ajax({url:"/Shopping/GetWebsiteList",type:"POST",data:query,cache:!1,"async":query.PageIndex==0,beforeSend:function(){$(".preloader").show()},success:function(n){var t,i;HidePreloader();flagCompanyList=!0;n==null||n.listWebsite==null||n.listWebsite==""||n.listWebsite.trim()==""?(t='<li id="empty"><i class="empty"><\/i>Không có website nào phù hợp với tiêu chí tìm kiếm!<\/li>',$(".listonline").html(t)):($(".listonline").html(n.listWebsite),handleReadMore("#viewMore",n.left));n.left<=0?$("#viewMore").hide():$("#viewMore").show();i="c="+query.StrListCateId;document.location.hash=i},error:function(){console.log("Lỗi gọi action")}}))}function viewMoreWebsiteList(){query.PageIndex=query.PageIndex+1;query.IsFilterManyCate="1";query.IsGetAll=!1;$("a[data-id='0']").hasClass("active")&&(query.IsGetAll=!0);$.ajax({url:"/Shopping/GetWebsiteList",type:"POST",data:query,cache:!1,beforeSend:function(){$(".preloader").show()},success:function(n){HidePreloader();flagCompanyList=!0;n==null||n.listWebsite==null||n.listWebsite==""||n.listWebsite.trim()==""||($(".listonline").append(n.listWebsite),handleReadMore("#viewMore",n.left));n.left<=0?$("#viewMore").hide():$("#viewMore").show()},error:function(){console.log("Lỗi gọi action")}})}function unique(n,t,i){return i.indexOf(n)===t}function handleReadMore(n,t){t>0?($(n).show(),$(n+" span").text(`Xem thêm ${t} website ${query.CategoryName}`)):$(n).hide()}var isShow=!1,flagCompanyList;$(document).ready(function(){var n,t;query.IsMobile!=undefined&&query.IsMobile&&($("#show-all-cate").hide(),HandleSubCateFilter(),$("#show-all-cate").click(function(){$(".quicklink").find("a:hidden").show();isShow===!1?($(this).text("Thu gọn"),$(this).addClass("arrow-menuB"),isShow=!0):($(this).text("Xem tất cả danh mục"),$(this).removeClass("arrow-menuB"),HandleSubCateFilter(),isShow=!1)}));n=document.location.hash;n&&(query.StrListCateId=n.replace("#c=",""),t=n.replace("#c=","").split(","),$(".quicklink").find("a[data-id='0']").removeClass("active"),t!==undefined&&jQuery.each(t,function(n,t){$(".quicklink").find("a[data-id='"+t+"']").addClass("active")}),getWebsiteList());$(".quicklink a.cate__filter").click(function(){var t,i,r,n;$(this).toggleClass("active");IsHasTabActive()===!1?($(".quicklink").find("a[data-id='0']").addClass("active"),window.location.href="/mua-sam-online/"+query.CategoryUrl):(t=$(this).data("id"),i=$(this).data("url"),t!==undefined&&i!==undefined&&(t==0&&i=="all"?$(this).hasClass("active")&&(window.location.href="/mua-sam-online/"+query.CategoryUrl):$(this).hasClass("active")&&$(".quicklink").find("a[data-id='0'].active").length>0&&$(".quicklink").find("a[data-id='0']").removeClass("active"),r=$(".quicklink a.active"),r.length>0?(n=[],r.each(function(){n.push($(this).data("id"))}),n=n.filter(unique),query.StrListCateId=n.join(),getWebsiteList()):query.StrListCateId=""))})});flagCompanyList=!0;